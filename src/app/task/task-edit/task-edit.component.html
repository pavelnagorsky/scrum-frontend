<div class="card mb-2" [@fadeInOut]>
  <div class="card-body">
    <div class="card-title text-center fw-bold">
      {{ editMode ? 'Edit' : 'New' }} Task
    </div>
    <div class="card-text">
      <form
        class="form" 
        [formGroup]="taskForm" 
        (ngSubmit)="onSubmit()"
      >
        <div class="mb-3">
          <div class="form-group">
            <label class="form-label" for="title">Title</label>
            <input 
              formControlName="title"
              type="text" 
              placeholder="Title" 
              id="title" 
              [class]="['form-control', isValid('title')].join(' ')" 
              aria-describedby="titleHelp"
            >
          </div>
        </div>
        <div class="mb-3">
          <div class="form-group">
            <label class="form-label" for="description">Description</label>
            <textarea
              formControlName="description"
              [class]="['form-control', isValid('description')].join(' ')" 
              type="date" 
              placeholder="Description" 
              id="description" 
              rows="3"
            >
            </textarea>
          </div>
        </div>
        <div class="mb-3">
          <div class="form-group">
            <label class="form-label" for="storyPoints">Story points</label>
            <input 
              formControlName="storyPoints"
              [class]="['form-control', isValid('storyPoints')].join(' ')" 
              type="number" 
              step="1" min="0" max="5"
              placeholder="Story points" 
              id="storyPoints" 
              aria-describedby="storyPointsHelp"
            >
            <div 
              [ngClass]="{ 'd-none': !showControlMessage('storyPoints') }"
              id="storyPointsHelp" 
              class="form-text"
            >
              Please, provide a valid Story Points (0 - 5)
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-center">
          <button 
            [disabled]="taskForm.invalid"
            class="btn btn-primary d-flex align-items-center justify-content-center me-2" 
            style="width: 140px;"
            type="submit"
          >
            {{ editMode ? 'Update' : 'Create' }}
            <div class="ms-2" *ngIf="loading">
              <app-loading-spinner></app-loading-spinner>
            </div>
          </button>
          <button
            class="btn btn-outline-danger"
            type="button"
            (click)="onCancel()"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>